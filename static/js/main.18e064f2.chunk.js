(this["webpackJsonpoverhide-widgets-react-demo-app"]=this["webpackJsonpoverhide-widgets-react-demo-app"]||[]).push([[0],{11:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),c=n(17),i=n.n(c),a=(n(24),n(10)),o=n(3),d=(n(25),n(11),n(6)),u=n.n(d),b=n(18),l=n(0),h=function(e){var t=Object(r.useRef)(),n=Object(r.useState)(null),s=Object(o.a)(n,2),c=s[0],i=s[1],a=function(t){e.onPendingTransaction&&e.onPendingTransaction(t.detail.currency,t.detail.isPending)};return Object(r.useEffect)((function(){if(e.onHubInit){var n=t.current;e.onHubInit(n)}fetch("".concat("https://demo-back-end.azurewebsites.net/api","/GetToken")).then(function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=8;break}return e.t0=i,e.next=4,t.text();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=9;break;case 8:console.error("error talking to back-end -- ".concat(t.status," &mdash; ").concat(t.statusText));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error("error talking to back-end -- ".concat(e))}))}),[t]),Object(r.useEffect)((function(){var e=t.current;return e.addEventListener("overhide-hub-pending-transaction",a),function(){return e.removeEventListener("overhide-hub-pending-transaction",a)}}),[t]),Object(l.jsx)("div",{children:Object(l.jsx)("overhide-hub",{ref:t,token:c,isTest:e.isTest})})},f=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){if(t){var n=t.current;e.hub&&n.setHub&&n.setHub(e.hub)}}),[e.hub]),Object(l.jsx)("div",{children:Object(l.jsx)("overhide-status",{ref:t})})},j=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){if(t){var n=t.current;e.hub&&n.setHub&&n.setHub(e.hub)}}),[e.hub]),Object(l.jsx)("div",{children:Object(l.jsx)("overhide-login",{ref:t,overhideSocialMicrosoftEnabled:!0,overhideSocialGoogleEnabled:!0,overhideOhledgerWeb3Enabled:!0,overhideEthereumWeb3Enabled:!0,overhideBitcoinEnabled:!0,overhideLedgerEnabled:!0})})},v=(n(28),function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){if(t){var n=t.current;e.hub&&n.setHub&&n.setHub(e.hub)}}),[e.hub]),Object(l.jsx)("div",{children:Object(l.jsx)("overhide-appsell",{ref:t,loginMessage:"Login",children:Object(l.jsx)("div",{slot:"unauthorized-button",className:"neopolitan-button"})})})}),p=function(e){var t=Object(r.useRef)(),n=function(t){console.log("sku-clicked :: ".concat(JSON.stringify(t.detail,null,2))),fetch("".concat("https://demo-back-end.azurewebsites.net/api","/RunFeature")+"?sku=".concat(t.detail.sku)+"&currency=".concat(t.detail.currency)+"&from=".concat(t.detail.from)+"&isTest=".concat(t.detail.isTest)+"&message=".concat(btoa(t.detail.message))+"&signature=".concat(btoa(t.detail.signature))).then((function(n){n.ok?e.onAddMessage&&e.onAddMessage(t.detail.sku):e.onAddError&&e.onAddError("error talking to back-end &mdash; ".concat(n.status," &mdash; ").concat(n.statusText))})).catch((function(t){return e.onAddError&&e.onAddError("error talking to back-end &mdash; ".concat(t))}))};return Object(r.useEffect)((function(){if(t){var n=t.current;e.hub&&n.setHub&&n.setHub(e.hub)}}),[e.hub]),Object(r.useEffect)((function(){var e=t.current;return e.addEventListener("overhide-appsell-sku-clicked",n),function(){return e.removeEventListener("overhide-appsell-sku-clicked",n)}}),[e.hub]),Object(l.jsx)("div",{children:Object(l.jsx)("overhide-appsell",{ref:t,sku:e.sku,priceDollars:e.priceDollars,authorizedMessage:e.authorizedMessage,unauthorizedTemplate:e.unauthorizedTemplate,bitcoinAddress:e.bitcoinAddress,ethereumAddress:e.ethereumAddress,overhideAddress:e.overhideAddress,withinMinutes:e.withinMinutes})})},O=n(19),g=(n(29),function(e){var t=[],n=1;console.log("MESSAGES :: ".concat(t.length));var r,s=Object(O.a)(e.messages);try{for(s.s();!(r=s.n()).done;){var c=r.value;t.push(Object(l.jsx)("div",{className:"w3-col s8 w3-center ".concat(c.isError?"w3-panel w3-pale-red w3-display-container":"w3-panel w3-pale-green w3-display-container"),children:Object(l.jsx)("p",{children:c.text})},n++))}}catch(i){s.e(i)}finally{s.f()}return Object(l.jsx)("div",{className:"w3-row messages-envelope",children:t})}),x=function(e){var t=Object(r.useState)(!1),n=Object(o.a)(t,2),s=n[0],c=n[1],i=Object(r.useState)(),d=Object(o.a)(i,2),u=d[0],b=d[1],O=Object(r.useState)([]),x=Object(o.a)(O,2),m=x[0],w=x[1],k=function(e){m.unshift({text:"".concat(new Date," -- ").concat(e," feature used"),isError:!1}),w(Object(a.a)(m))},E=function(e){m.unshift({text:e,isError:!0}),w(Object(a.a)(m))};return Object(l.jsxs)("div",{children:[Object(l.jsx)("img",{className:"visa ".concat(s?"visible":"invisible"),id:"visa",src:"".concat("https://overhide.github.io/overhide-widgets-react-demo-app/build","/visa.png"),alt:""}),Object(l.jsx)(h,{isTest:!0,onHubInit:function(e){e&&b(e)},onPendingTransaction:function(e,t){console.log("pending-transaction :: ".concat(JSON.stringify({currency:e,isPending:t}))),"dollars"===e&&c(t)}}),Object(l.jsx)("div",{className:"w3-bar w3-border w3-light-grey",children:Object(l.jsx)("div",{className:"w3-right",children:Object(l.jsx)(f,{hub:u})})}),Object(l.jsx)(j,{hub:u}),Object(l.jsxs)("div",{className:"w3-row w3-padding-64",children:[Object(l.jsx)("div",{className:"w3-col s4",children:"\xa0"}),Object(l.jsx)("div",{className:"w3-col s4 w3-center",children:Object(l.jsx)(v,{hub:u})})]}),Object(l.jsxs)("div",{className:"w3-row appsell-envelope",children:[Object(l.jsx)("div",{className:"w3-col s4 w3-center",children:Object(l.jsx)(p,{hub:u,sku:"free-feature",priceDollars:"0",authorizedMessage:"Use Feature",unauthorizedTemplate:"Login to Use Free Feature",bitcoinAddress:"tb1qr9d7z0es86sps5f2kefx5grpj4a5yvp4evj80z",ethereumAddress:"0x046c88317b23dc57F6945Bf4140140f73c8FC80F",overhideAddress:"0x046c88317b23dc57F6945Bf4140140f73c8FC80F",onAddMessage:k,onAddError:E})}),Object(l.jsx)("div",{className:"w3-col s4 w3-center",children:Object(l.jsx)(p,{hub:u,sku:"paid-feature",priceDollars:"2",authorizedMessage:"Use Feature",unauthorizedTemplate:"Add Feature ($${topup})",bitcoinAddress:"tb1qr9d7z0es86sps5f2kefx5grpj4a5yvp4evj80z",ethereumAddress:"0x046c88317b23dc57F6945Bf4140140f73c8FC80F",overhideAddress:"0x046c88317b23dc57F6945Bf4140140f73c8FC80F",onAddMessage:k,onAddError:E})}),Object(l.jsx)("div",{className:"w3-col s4 w3-center",children:Object(l.jsx)(p,{hub:u,sku:"subscribed-feature",priceDollars:"3",authorizedMessage:"Use Feature",unauthorizedTemplate:"Subscribe Feature For 30 Minutes ($${topup})",bitcoinAddress:"tb1qr9d7z0es86sps5f2kefx5grpj4a5yvp4evj80z",ethereumAddress:"0x046c88317b23dc57F6945Bf4140140f73c8FC80F",overhideAddress:"0x046c88317b23dc57F6945Bf4140140f73c8FC80F",withinMinutes:"30",onAddMessage:k,onAddError:E})})]}),Object(l.jsx)("div",{className:"w3-row w3-padding-64",children:Object(l.jsx)("div",{className:"w3-col w3-center",children:Object(l.jsx)(g,{messages:m})})})]})},m=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),s(e),c(e),i(e)}))},w=n(5);w.OverhideHub,w.OverhideStatus,w.OverhideLogin,w.OverhideAppsell,i.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(x,{})}),document.getElementById("root")),m()}},[[51,1,2]]]);
//# sourceMappingURL=main.18e064f2.chunk.js.map